#include<iostream>
#include<vector>
#include<algorithm>
#include<climits>
using namespace std;
void maxs(){
    int n;
    cin>>n;
    vector<long long>s(n+1);
    for(int i=1;i<=n;++i){
        cin>>s[i];
    }
    vector<long long>left(n+1);
    long long current=0;
    long long max_=LLONG_MIN;
    for(int i=1;i<=n;i++){
        current=max(s[i],current+s[i]);
        max_=max(max_,current);
        left[i]=max_;
    }
    vector<long long>right(n+2);
    current=0;
    max_=LLONG_MIN;
    for(int i=n;i>=1;i--){
        current=max(s[i],current+s[i]);
        max_=max(max_,current);
        right[i]=max_;
    }
    long long sum=LLONG_MIN;
    for(int k=1;k<n;k++){
        sum=max(sum,left[k]+right[k+1]);
        
    }
    cout<<sum<<endl;
}
int main(){
maxs();
    return 0;

}
